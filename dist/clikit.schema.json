{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://unpkg.com/clikit-plugin/schema.json",
  "title": "CliKit Config",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "$schema": {
      "type": "string"
    },
    "disabled_agents": {
      "type": "array",
      "items": { "type": "string" },
      "default": []
    },
    "disabled_commands": {
      "type": "array",
      "items": { "type": "string" },
      "default": []
    },
    "disabled_skills": {
      "type": "array",
      "items": { "type": "string" },
      "default": []
    },
    "agents": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "additionalProperties": true,
        "properties": {
          "model": { "type": "string" },
          "temperature": { "type": "number" },
          "mode": { "enum": ["subagent", "primary", "all"] },
          "disabled": { "type": "boolean" },
          "tools": {
            "type": "object",
            "additionalProperties": { "type": "boolean" }
          },
          "permission": {
            "type": "object",
            "additionalProperties": true
          }
        }
      },
      "default": {}
    },
    "commands": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "additionalProperties": true
      },
      "default": {}
    },
    "skills": {
      "anyOf": [
        {
          "type": "array",
          "items": { "type": "string" }
        },
        {
          "type": "object",
          "properties": {
            "sources": {
              "type": "array",
              "items": {
                "anyOf": [
                  { "type": "string" },
                  {
                    "type": "object",
                    "required": ["path"],
                    "properties": {
                      "path": { "type": "string" },
                      "recursive": { "type": "boolean" },
                      "glob": { "type": "string" }
                    },
                    "additionalProperties": false
                  }
                ]
              }
            },
            "enable": {
              "type": "array",
              "items": { "type": "string" }
            },
            "disable": {
              "type": "array",
              "items": { "type": "string" }
            }
          },
          "additionalProperties": {
            "anyOf": [
              { "type": "boolean" },
              {
                "type": "object",
                "additionalProperties": true,
                "properties": {
                  "description": { "type": "string" },
                  "template": { "type": "string" },
                  "from": { "type": "string" },
                  "model": { "type": "string" },
                  "agent": { "type": "string" },
                  "subtask": { "type": "boolean" },
                  "argument-hint": { "type": "string" },
                  "license": { "type": "string" },
                  "compatibility": { "type": "string" },
                  "metadata": { "type": "object", "additionalProperties": true },
                  "allowed-tools": {
                    "type": "array",
                    "items": { "type": "string" }
                  },
                  "disable": { "type": "boolean" }
                }
              }
            ]
          }
        }
      ],
      "default": {}
    },
    "lsp": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "additionalProperties": true,
        "required": ["command"],
        "properties": {
          "command": {
            "type": "array",
            "items": { "type": "string" },
            "minItems": 1
          },
          "extensions": {
            "type": "array",
            "items": { "type": "string" }
          },
          "priority": { "type": "number" },
          "disabled": { "type": "boolean" },
          "env": {
            "type": "object",
            "additionalProperties": { "type": "string" }
          },
          "initialization": {
            "type": "object",
            "additionalProperties": true
          }
        }
      },
      "default": {}
    },
    "hooks": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "session_logging": { "type": "boolean" },
        "tool_logging": { "type": "boolean" },
        "todo_enforcer": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": { "type": "boolean" },
            "warn_on_incomplete": { "type": "boolean" }
          }
        },
        "empty_message_sanitizer": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": { "type": "boolean" },
            "log_empty": { "type": "boolean" },
            "placeholder": { "type": "string" }
          }
        },
        "git_guard": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": { "type": "boolean" },
            "allow_force_with_lease": { "type": "boolean" }
          }
        },
        "security_check": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": { "type": "boolean" },
            "block_commits": { "type": "boolean" }
          }
        },
        "subagent_question_blocker": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": { "type": "boolean" }
          }
        },
        "truncator": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": { "type": "boolean" },
            "max_output_chars": { "type": "number" },
            "max_output_lines": { "type": "number" },
            "preserve_head_lines": { "type": "number" },
            "preserve_tail_lines": { "type": "number" },
            "log": { "type": "boolean" }
          }
        },
        "swarm_enforcer": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": { "type": "boolean" },
            "strict_file_locking": { "type": "boolean" },
            "block_unreserved_edits": { "type": "boolean" },
            "log": { "type": "boolean" }
          }
        },
        "memory_digest": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": { "type": "boolean" },
            "max_per_type": { "type": "number" },
            "include_types": {
              "type": "array",
              "items": { "type": "string" }
            },
            "index_highlights_per_type": { "type": "number" },
            "write_topic_files": { "type": "boolean" },
            "log": { "type": "boolean" }
          }
        },
        "todo_beads_sync": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": { "type": "boolean" },
            "close_missing": { "type": "boolean" },
            "log": { "type": "boolean" }
          }
        },
        "cass_memory": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": { "type": "boolean" },
            "context_on_session_created": { "type": "boolean" },
            "reflect_on_session_idle": { "type": "boolean" },
            "context_limit": { "type": "number" },
            "reflect_days": { "type": "number" },
            "log": { "type": "boolean" }
          }
        }
      }
    }
  }
}
